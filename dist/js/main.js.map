{"version":3,"sources":["main.js"],"names":["console","log","API_KEY","termEl","document","getElementById","locationEl","searchBtn","resultsEl","addEventListener","e","preventDefault","queryTerm","value","location","prices","getCheckedValues","querySelectorAll","searchYelp","checkedItems","allChecked","i","length","checkedItem","displayBusinesses","businessArray","innerHTML","currentBusiness","currentBusinessLocation","liEl","createElement","aEl","imgEl","pAddressEl","p$El","pRatingEl","name","href","url","src","image_url","address1","city","state","zip_code","price","rating","appendChild","axios","get","params","headers","then","response","data","businesses"],"mappings":"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","file":"main.js","sourcesContent":["console.log(\"Fake Yelp\");\n\n(function(){\n\n\t\t\t\t\n    const API_KEY = 'xICUj5FsqM8P6cfNhFQEYwtYzrv75F4WEqj-Hns-fUTZgyLOzQBVyr01f9g3p-5P3J9S7LkrGhLEWjqi7t_ZHoZedrj9zV1E34GIIu1nLLF814cws_futxGtRGPiWnYx';\n                \n\n    const termEl = document.getElementById('term');\n    const locationEl = document.getElementById('location');\n    const searchBtn = document.getElementById('search');\n    const resultsEl = document.getElementById('results');\n\n\n    searchBtn.addEventListener(\"click\", function(e) {\n        e.preventDefault();\n\n        const queryTerm = termEl.value;\n        const location = locationEl.value;\n        const prices = getCheckedValues(document.querySelectorAll('[name=price]:checked'));\n\n        searchYelp(location, queryTerm, prices);\n    })\n\n    function getCheckedValues(checkedItems){\n        console.log('checked', checkedItems);\n        //option 1: the old-school JS way\n        let allChecked = '';\n        for (var i = checkedItems.length - 1; i >= 0; i--) {\n            var checkedItem = checkedItems[i];\n            allChecked = allChecked + ', ' + checkedItem;\n        }\n        //option 2: the ES6 way\n        // [...checkedItems].map(function(checkItem){  - this turns it into an array as far as js is concerned\n            //return checkedItem.value });\n            //const allChecked= checkedValues.join(','); \n            //conole.log('allChecked', allChecked);\n        return allChecked;\n    }\n\n    function displayBusinesses(businessArray){\n        \n        resultsEl.innerHTML = '';\n        \n        console.log(businessArray);\n        // resultsEl.removeChild(liEl);\n        for (var i = 0; i <= businessArray.length - 1; i++) {\n            console.log(businessArray[i]);\n\n            const currentBusiness = businessArray[i];\n            const currentBusinessLocation = businessArray[i].location;\n            let liEl = document.createElement('li');\n            let aEl = document.createElement('a');\n            let imgEl = document.createElement('img');\n            let pAddressEl = document.createElement('p');\n            let p$El = document.createElement('p');\n            let pRatingEl = document.createElement('p');\n\n            aEl.innerHTML = currentBusiness.name;\n            aEl.href = currentBusiness.url;\n            imgEl.src = currentBusiness.image_url;\n            pAddressEl.innerHTML = currentBusinessLocation.address1 + \"<br/>\" + currentBusinessLocation.city + \", \" + currentBusinessLocation.state + \" \" + currentBusinessLocation.zip_code; \n            p$El.innerHTML = currentBusiness.price;\n            pRatingEl.innerHTML = \"Rating \" + currentBusiness.rating;\n\n            liEl.appendChild(aEl);\n            liEl.appendChild(imgEl);\n            liEl.appendChild(pAddressEl);\n            liEl.appendChild(p$El);\n            liEl.appendChild(pRatingEl);\n\n            resultsEl.appendChild(liEl);\n        }\n    }\n\n    //params and headers are part of axios. It is builing the + \"\" + \"\" that we did last week\n    function searchYelp(location, queryTerm, prices) {\n        axios.get(\"https://circuslabs.net/proxies/yelp-fusion-proxy/\", {\n            params: {\n                '_ep': '/businesses/search',\n                'term': queryTerm,\n                'location': location\n            },\n            headers: {\n                'Authorization': 'Bearer ' + API_KEY\n            }\n        })\n        //the response is the JSON data we are getting back\n        .then(function(response){\n            console.log('here is the get response data for key:', response.data, response);\n            displayBusinesses(response.data.businesses);\n        });\n    }\n\n})()"]}